<div class="card m-3" id="blog-card">
    <div class="card-body">
        <div class="d-flex flex-row">
            <span class="h5"><%= @blog.user.username %></span>
            <div class="dropdown d-inline-flex ms-auto">
                <button class="btn btn-light btn-sm" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-three-dots-vertical"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton1">
                    <% if current_user.id == @blog.user_id %>
                        <li>
                            <%= link_to "Edit post", edit_blog_path(@blog), class:"dropdown-item" %>
                        </li>
                        <li>
                            <%= button_to "Delete post", @blog, method: :delete, data: { confirm: 'Are you sure you want to delete this post?' }, class:"dropdown-item" %>
                        </li>
                    <% end %>
                </ul>
            </div>
        </div>

        <%= @blog.blog_text %>
    </div>

    <div class="card-footer">
        <% liked = @blog.likes.find { |like| like.user_id == current_user.id} %>
        <% if liked %>
            <%= button_to 'Unlike', blog_like_path(@blog, liked), method: :delete, class:"btn btn-success" %>
        <% else %>
            <%= button_to 'Like', blog_likes_path(@blog), method: :post, class:"btn btn-success" %>
        <% end %>
    </div>
</div>

<%= render "comments/form" %>

<%= render @blog.comments %>