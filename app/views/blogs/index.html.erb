<h1>Blogs</h1>

<% @blogs.each do |blog| %>
    <div class="card mb-3 mx-auto">
        <div class="card-header d-flex">
            Poster goes here
            <div class="dropdown d-inline-flex ms-auto">
                 <button class="btn btn-light" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-three-dots"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton1">
                    <li>
                        <%= link_to "Show post", blog, class:"dropdown-item" %>                        
                    </li>
                    <li>
                        <%= link_to "Edit post", edit_blog_path(blog), class:"dropdown-item" %>
                    </li>
                    <li>
                        <%= button_to "Delete post", blog, method: :delete, data: { confirm: 'Are you sure you want to delete this post?' }, class:"dropdown-item" %>
                    </li>
                </ul>
            </div>
        </div>

        <div class="card-body">
            <p><%= blog.blog_text %></p>
        </div>

        <div class="card-footer">
            Like button goes here
        </div>
    </div>
<% end %>

<br>

<%= link_to 'New Blog', new_blog_path %>

<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Post something
</button>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <%= form_for( @blog , remote: true, html: { class: "modal-content", role: "form" }, url: blogs_path) do |f| %>
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Create a blog</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">  
                <%= f.text_area :blog_text, class:"form-control" %>
            </div>
            <div class="modal-footer">
                <%= f.submit %>
            </div>
        <% end %>
    </div>
</div>